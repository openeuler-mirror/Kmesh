# summer-ospp

## 项目简介

1、veth pair是linux中提供的一种虚拟网络设备，veth总是成对出现，一个pair对中的veth就像一根网线的两端，数据从一个端点流进，就会从另一端流出，veth可以配置ip，实现不同netns间的通信；当前veth pair容器网络中常用的网络模型；通过将veth的一段挂到Pod内，另一端在node上，实现Pod与外部网络的互通；

2、Pod流量经过veth pair后存在一定的性能损耗（对比测试主机进程直接通信的性能损耗约40%），存在较大优化空间；本项目期望基于ebpf技术对veth的网络性能做优化；

【相关参考资料】：（包括项目的代码仓库链接、学习资料等）
https://arthurchiao.art/blog/cilium-life-of-a-packet-pod-to-service/

## 项目预设信息

- 容器网络模型：

  Underlay模式：veth pair + route实现容器网络；
- 操作系统版本：

  基于openEuler-22.03-LTS版本开发；
- 环境准备：

  基于calico cni搭建路由模式的容器网络集群；

## 项目验收场景（1/2必选，3/4为进阶场景）

1． service方式，同节点pod – pod通信；

2． service方式，跨节点pod – pod通信；

3． nodePort方式，集群外访问本节点pod；

4． nodePort方式，集群外方式访问跨节点pod；

初步预设提升10%+。

## 项目输出件

1． 业界调研材料 & 方案设计材料；

2． 结项材料；

3． 源码提交进代码仓；（仓库地址待提供）

4． 可运行demo程序，体现性能优化的对比效果；（初步预设提升10%+）

## 项目计划/进度

1． 环境搭建 & 基础测试； -- 7.21

- [X] calico容器网络集群搭建；
- [X] 基线测试：用例设计 & 基线数据归档；
- [X] 数据面转发原理分析；

2． 业界方案调研（Cilium相关代码分析）； -- 7.31
- [X] 数据面转发原理分析；
- [X] Cilium数据面转发原理分析还需要细化分析；

3． 验收场景1开发验证； -- 8.8
- [X] 初步已完成
- [ ] cni插件，控制面的实现

4． 验收场景2开发验证； -- 8.15

5． 验收场景3开发验证； -- 8.31

6． 验收场景4开发验证； -- 9.15

7． 结项材料准备； -- 9.25

## 运作方式

每周一次简会（每周二晚7:00），进展和困难对齐、总结分享；
